@using MudBlazor
@using TournamentApp.Shared

<TitleContent>
    <MudText Typo="Typo.h6">Add Player to Tournament</MudText>
</TitleContent>
<DialogContent>
    @if (_players == null)
    {
        <MudProgressCircular Indeterminate="true" />
    }
    else if (!_players.Any())
    {
        <MudAlert Severity="Severity.Warning">No players available. Please create players first.</MudAlert>
    }
    else
    {
        <EditForm Model="@_viewModel" OnValidSubmit="HandleValidSubmit">
            <DataAnnotationsValidator />
            <MudSelect @bind-Value="_viewModel.PlayerId" Label="Select Player" Variant="Variant.Outlined" Class="mb-3">
                @foreach (var player in _players)
                {
                    <MudSelectItem Value="@player.Id">@player.Name</MudSelectItem>
                }
            </MudSelect>
            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Disabled="@_isSaving">
                @if (_isSaving)
                {
                    <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                    <MudText Class="ms-2">Adding...</MudText>
                }
                else
                {
                    <MudText>Add Player</MudText>
                }
            </MudButton>
            <MudButton ButtonType="ButtonType.Button" Variant="Variant.Text" Color="Color.Default" OnClick="Cancel" Class="ms-2">
                Cancel
            </MudButton>
        </EditForm>
    }
</DialogContent>
